(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f7ca0c60"],{2586:function(t,e,o){"use strict";o("8fed")},6886:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("el-form",{ref:"form",staticClass:"config-form",attrs:{model:t.form,rules:t.rules,"label-width":"160px"}},[o("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"基本配置",name:"tab01"}},[o("el-col",{attrs:{span:18}},[o("el-form-item",{attrs:{label:"网站域名",prop:"host"}},[o("el-input",{model:{value:t.form.host,callback:function(e){t.$set(t.form,"host",e)},expression:"form.host"}}),o("el-col",{staticClass:"tip"},[t._v(" 例: https://htoolbox.site ")])],1),o("el-form-item",{attrs:{label:"网站标题",prop:"title"}},[o("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),o("el-form-item",{attrs:{label:"网站图标",prop:"favicon"}},[o("el-upload",{staticClass:"img-uploader",attrs:{action:t.uploadUrl,"show-file-list":!1,multiple:!1,"on-success":t.handleFaviconSuccess,"before-upload":t.beforeUpload}},[t.form.favicon?o("div",[o("img",{staticClass:"favicon",attrs:{src:t.parsePreviewSrc(t.form.favicon)}})]):o("i",{staticClass:"el-icon-plus favicon-uploader-icon"})]),o("el-col",{staticClass:"tip"},[t._v(" 建议尺寸: 64 x 64 px ")])],1),o("el-form-item",{attrs:{label:"网站Logo",prop:"logo"}},[o("el-upload",{staticClass:"img-uploader",attrs:{action:t.uploadUrl,"show-file-list":!1,multiple:!1,"on-success":t.handleLogoSuccess,"before-upload":t.beforeUpload}},[t.form.logo?o("div",[o("img",{staticClass:"logo",attrs:{src:t.parsePreviewSrc(t.form.logo)}})]):o("i",{staticClass:"el-icon-plus logo-uploader-icon"})]),o("el-col",{staticClass:"tip"},[t._v(" 建议尺寸: 150 x 60 px ")])],1),o("el-form-item",{attrs:{label:"网站关键字",prop:"pid"}},[o("el-input",{attrs:{type:"textarea"},model:{value:t.form.keywords,callback:function(e){t.$set(t.form,"keywords",e)},expression:"form.keywords"}})],1),o("el-form-item",{attrs:{label:"网站描述",prop:"pid"}},[o("el-input",{attrs:{type:"textarea"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1),o("el-tab-pane",{attrs:{label:"站长配置",name:"tab02"}},[o("el-col",{attrs:{span:18}},[o("el-form-item",{attrs:{label:"Baidu站点验证码",prop:"baiduSiteVerification"}},[o("el-input",{attrs:{type:"textarea"},model:{value:t.form.baiduSiteVerification,callback:function(e){t.$set(t.form,"baiduSiteVerification",e)},expression:"form.baiduSiteVerification"}})],1),o("el-form-item",{attrs:{label:"统计代码",prop:"trackCode"}},[o("el-input",{attrs:{type:"textarea"},model:{value:t.form.trackCode,callback:function(e){t.$set(t.form,"trackCode",e)},expression:"form.trackCode"}})],1),o("el-form-item",{attrs:{label:"Copyright",prop:"copyright"}},[o("el-input",{model:{value:t.form.copyright,callback:function(e){t.$set(t.form,"copyright",e)},expression:"form.copyright"}})],1),o("el-form-item",{attrs:{label:"备案号",prop:"beian"}},[o("el-input",{model:{value:t.form.beian,callback:function(e){t.$set(t.form,"beian",e)},expression:"form.beian"}})],1),o("el-form-item",{attrs:{label:"公安网备案号",prop:"gonganBeian"}},[o("el-input",{model:{value:t.form.gonganBeian,callback:function(e){t.$set(t.form,"gonganBeian",e)},expression:"form.gonganBeian"}})],1),o("el-form-item",{attrs:{label:"robots.txt",prop:"robots"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:15}},model:{value:t.form.robots,callback:function(e){t.$set(t.form,"robots",e)},expression:"form.robots"}})],1)],1)],1),o("el-tab-pane",{attrs:{label:"栏目配置",name:"tab03"}},[o("el-col",{attrs:{span:18}},[o("el-form-item",{attrs:{label:"首页显示分类",prop:"indexCategories"}},[o("el-checkbox-group",{model:{value:t.form.indexCategories,callback:function(e){t.$set(t.form,"indexCategories",e)},expression:"form.indexCategories"}},t._l(t.categoryOptions,(function(e){return o("el-checkbox",{key:e.id,attrs:{label:e.id,border:""}},[t._v(t._s(e.title))])})),1)],1),o("el-form-item",{attrs:{label:"边栏顶部分类",prop:"rightTopCategory",placeholder:"请选择"}},[o("el-select",{model:{value:t.form.rightTopCategory,callback:function(e){t.$set(t.form,"rightTopCategory",e)},expression:"form.rightTopCategory"}},t._l(t.categoryOptions,(function(t){return o("el-option",{key:t.id,attrs:{label:t.title,value:t.id+""}})})),1)],1)],1)],1),o("el-tab-pane",{attrs:{label:"文章配置",name:"tab04"}},[o("el-col",{attrs:{span:18}},[o("el-form-item",{attrs:{label:"原创文章版权声明",prop:"articleCopyright"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10}},model:{value:t.form.articleCopyright,callback:function(e){t.$set(t.form,"articleCopyright",e)},expression:"form.articleCopyright"}})],1),o("el-form-item",{attrs:{label:"非原创文章末尾声明",prop:"articleSuffix"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10}},model:{value:t.form.articleSuffix,callback:function(e){t.$set(t.form,"articleSuffix",e)},expression:"form.articleSuffix"}})],1)],1)],1),o("el-tab-pane",{attrs:{label:"版本授权",name:"tab05"}},[o("el-col",{attrs:{span:18}},[o("el-form-item",{attrs:{label:"产品名称"}},[o("span",[t._v(t._s(t.form.productName))])]),o("el-form-item",{attrs:{label:"产品标识"}},[o("span",[t._v(t._s(t.form.product))])]),o("el-form-item",{attrs:{label:"当前版本"}},[o("span",[t._v(t._s(t.form.productVersion))])]),o("el-form-item",{attrs:{label:"授权类型"}},[t.form.grant?o("span",[t._v("正版授权")]):o("span",[t._v("试用版"),o("a",{staticClass:"gotobuy",attrs:{href:"javascript:void(0);"}},[t._v("获取授权码")])]),t.form.grantExpired?o("span",[t._v("(已过期)"),o("a",{staticClass:"gotobuy",attrs:{href:"javascript:void(0);"}},[t._v("获取授权码")])]):t._e()]),o("el-form-item",{attrs:{label:"过期时间"}},[o("span",[t._v(t._s(t.form.grantExpiredAt))])]),o("el-form-item",{attrs:{label:"授权网址"}},[void 0!=t.form.grantWebsites&&t.form.grantWebsites.length>0?o("span",[t._v(t._s(t.form.grantWebsites))]):o("span",[t._v("无")])]),o("el-form-item",{attrs:{label:"授权码",prop:"grantToken"}},[o("el-input",{attrs:{autosize:{minRows:6,maxRows:10},type:"textarea"},model:{value:t.form.grantToken,callback:function(e){t.$set(t.form,"grantToken",e)},expression:"form.grantToken"}})],1)],1)],1)],1)],1),o("el-col",{staticStyle:{"text-align":"center"}},[o("el-button",{attrs:{type:"warn"},on:{click:t.onRefreshCache}},[t._v("清理缓存")]),o("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("保存配置")])],1)],1)},r=[],i=(o("ac1f"),o("1276"),o("d3b7"),o("159b"),o("a15b"),o("b775"));function n(){return Object(i["a"])({url:"/api/admin/content/config/refreshCache",method:"get"})}function l(){return Object(i["a"])({url:"/api/admin/content/config/crud",method:"get"})}function s(t){return Object(i["a"])({url:"/api/admin/content/config/crud",method:"put",data:t})}var c=o("90fa"),m={name:"CmsConfig",data:function(){return{activeName:"tab01",uploadUrl:"/api/common/uploadImage",categoryOptions:[],form:{title:void 0,host:void 0,keywords:void 0,description:void 0,trackCode:void 0,copyright:void 0,favicon:void 0,logo:void 0,baiduSiteVerification:void 0,beian:void 0,gonganBeian:void 0,articleCopyright:void 0,articleSuffix:void 0,robots:void 0,indexCategory:void 0,indexCategories:[],rightTopCategory:0,wechatQrcode:void 0,grantToken:void 0},rules:{}}},created:function(){var t=this;this.getCategories().then((function(){l().then((function(e){var o=e.data.row;if(t.form=Object.assign(t.form,o),void 0!==o.indexCategory){var a=o.indexCategory.split(",");t.form.indexCategories=[],a.forEach((function(e){var o=parseInt(e);isNaN(o)||t.form.indexCategories.push(parseInt(e))}))}}))}))},methods:{onRefreshCache:function(){var t=this;n().then((function(){t.$modal.msgSuccess("更新成功")}))},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){if(e){var o=Object.assign({},t.form);delete o["product"],delete o["productName"],delete o["productVersion"],delete o["grant"],delete o["grantWebsites"],delete o["grantExpiredAt"],delete o["grantExpired"],o["indexCategory"]=o["indexCategories"].join(","),delete o["indexCategories"],s(o).then((function(){t.$modal.msgSuccess("更新成功")}))}}))},beforeUpload:function(t){return"image/jpeg"!=t.type&&"image/png"!=t.type&&"image/x-icon"!=t.type?(this.$message.error("上传图片只能是 JPG、PNG、ICO 格式!"),!1):!(t.size/1024/1024>2)||(this.$message.error("上传图片大小不能超过 2MB!"),!1)},handleFaviconSuccess:function(t){this.form.favicon=t.data.url},handleLogoSuccess:function(t){this.form.logo=t.data.url},handleWechatSuccess:function(t){this.form.wechatQrcode=t.data.url},getCategories:function(){var t=this;return Object(c["listSimpleCategory"])().then((function(e){t.categoryOptions=e.data.rows}))}}},f=m,p=(o("2586"),o("2877")),u=Object(p["a"])(f,a,r,!1,null,null,null);e["default"]=u.exports},"8fed":function(t,e,o){},"90fa":function(t,e,o){"use strict";o.d(e,"f",(function(){return r})),o.d(e,"e",(function(){return i})),o.d(e,"a",(function(){return n})),o.d(e,"h",(function(){return l})),o.d(e,"d",(function(){return s})),o.d(e,"c",(function(){return c})),o.d(e,"b",(function(){return m}));var a=o("b775");function r(t){return Object(a["a"])({url:"/api/admin/content/category/list",method:"get",params:t})}function i(t){return Object(a["a"])({url:"/api/admin/content/category/get",method:"get",params:{id:t}})}function n(t){return Object(a["a"])({url:"/api/admin/content/category/insert",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/api/admin/content/category/update",method:"put",data:t})}function s(t){return Object(a["a"])({url:"/api/admin/content/category/delete",method:"delete",params:{id:t}})}function c(t){return Object(a["a"])({url:"/api/admin/content/category/inMenu",method:"put",data:t})}function m(t){return Object(a["a"])({url:"/api/admin/content/category/inBanner",method:"put",data:t})}}}]);