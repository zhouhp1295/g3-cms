(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a3a8f0d2"],{6886:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-form",{ref:"form",staticClass:"config-form",attrs:{model:e.form,rules:e.rules,"label-width":"160px"}},[o("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"基本配置",name:"tab01"}},[o("el-col",{attrs:{span:18}},[o("el-form-item",{attrs:{label:"网站域名",prop:"host"}},[o("el-input",{model:{value:e.form.host,callback:function(t){e.$set(e.form,"host",t)},expression:"form.host"}}),o("el-col",{staticClass:"tip"},[e._v(" 例: https://baidu.com ")])],1),o("el-form-item",{attrs:{label:"网站标题",prop:"title"}},[o("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),o("el-form-item",{attrs:{label:"网站图标",prop:"favicon"}},[o("el-upload",{staticClass:"img-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,multiple:!1,"on-success":e.handleFaviconSuccess,headers:e.headers,"before-upload":e.beforeUpload}},[e.form.favicon?o("div",[o("img",{staticClass:"favicon",attrs:{src:e.parsePreviewSrc(e.form.favicon)}})]):o("i",{staticClass:"el-icon-plus favicon-uploader-icon"})]),o("el-col",{staticClass:"tip"},[e._v(" 建议尺寸: 64 x 64 px ")])],1),o("el-form-item",{attrs:{label:"网站Logo",prop:"logo"}},[o("el-upload",{staticClass:"img-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,multiple:!1,"on-success":e.handleLogoSuccess,headers:e.headers,"before-upload":e.beforeUpload}},[e.form.logo?o("div",[o("img",{staticClass:"logo",attrs:{src:e.parsePreviewSrc(e.form.logo)}})]):o("i",{staticClass:"el-icon-plus logo-uploader-icon"})]),o("el-col",{staticClass:"tip"},[e._v(" 建议尺寸: 150 x 60 px ")])],1),o("el-form-item",{attrs:{label:"网站关键字",prop:"pid"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.keywords,callback:function(t){e.$set(e.form,"keywords",t)},expression:"form.keywords"}})],1),o("el-form-item",{attrs:{label:"网站描述",prop:"pid"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),o("el-form-item",{attrs:{label:"Copyright",prop:"copyright"}},[o("el-input",{model:{value:e.form.copyright,callback:function(t){e.$set(e.form,"copyright",t)},expression:"form.copyright"}})],1),o("el-form-item",{attrs:{label:"备案号",prop:"beian"}},[o("el-input",{model:{value:e.form.beian,callback:function(t){e.$set(e.form,"beian",t)},expression:"form.beian"}})],1),o("el-form-item",{attrs:{label:"公安网备案号",prop:"gonganBeian"}},[o("el-input",{model:{value:e.form.gonganBeian,callback:function(t){e.$set(e.form,"gonganBeian",t)},expression:"form.gonganBeian"}})],1)],1)],1),o("el-tab-pane",{attrs:{label:"站长配置",name:"tab02"}},[o("el-col",{attrs:{span:18}},[o("el-form-item",{attrs:{label:"Baidu站点验证码",prop:"baiduSiteVerification"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.baiduSiteVerification,callback:function(t){e.$set(e.form,"baiduSiteVerification",t)},expression:"form.baiduSiteVerification"}})],1),o("el-form-item",{attrs:{label:"robots.txt",prop:"robots"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:15}},model:{value:e.form.robots,callback:function(t){e.$set(e.form,"robots",t)},expression:"form.robots"}})],1)],1)],1),o("el-tab-pane",{attrs:{label:"文章配置",name:"tab04"}},[o("el-col",{attrs:{span:18}},[o("el-form-item",{attrs:{label:"文章末尾声明",prop:"articleSuffix"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10}},model:{value:e.form.articleSuffix,callback:function(t){e.$set(e.form,"articleSuffix",t)},expression:"form.articleSuffix"}})],1)],1)],1)],1)],1),o("el-col",{staticStyle:{"text-align":"center"}},[o("el-button",{attrs:{type:"warn"},on:{click:e.onRefreshCache}},[e._v("清理缓存")]),o("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存配置")])],1)],1)},i=[],r=o("b775");function l(){return Object(r["a"])({url:"/api/admin/content/config/cache/clean",method:"put"})}function s(){return Object(r["a"])({url:"/api/admin/content/config/web/get",method:"get"})}function n(e){return Object(r["a"])({url:"/api/admin/content/config/web/update",method:"put",data:e})}var c=o("5f87"),f={name:"CmsConfig",data:function(){return{activeName:"tab01",uploadUrl:"/api/common/uploadImage",headers:{Authorization:"Bearer "+Object(c["a"])()},form:{title:void 0,host:void 0,keywords:void 0,description:void 0,copyright:void 0,favicon:void 0,logo:void 0,baiduSiteVerification:void 0,beian:void 0,gonganBeian:void 0,articleSuffix:void 0,robots:void 0},rules:{}}},created:function(){var e=this;s().then((function(t){var o=t.data;e.form=Object.assign(e.form,o)}))},methods:{onRefreshCache:function(){var e=this;l().then((function(){e.$modal.msgSuccess("更新成功")}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){t&&n(e.form).then((function(){e.$modal.msgSuccess("更新成功")}))}))},beforeUpload:function(e){return"image/jpeg"!==e.type&&"image/png"!==e.type&&"image/x-icon"!==e.type?(this.$message.error("上传图片只能是 JPG、PNG、ICO 格式!"),!1):!(e.size/1024/1024>2)||(this.$message.error("上传图片大小不能超过 2MB!"),!1)},handleFaviconSuccess:function(e){this.form.favicon=e.data.url},handleLogoSuccess:function(e){this.form.logo=e.data.url}}},m=f,p=(o("daef"),o("2877")),u=Object(p["a"])(m,a,i,!1,null,null,null);t["default"]=u.exports},"775a":function(e,t,o){},daef:function(e,t,o){"use strict";o("775a")}}]);