(function(e){function t(t){for(var r,n,l=t[0],i=t[1],u=t[2],c=0,p=[];c<l.length;c++)n=l[c],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&p.push(s[n][0]),s[n]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,l=1;l<a.length;l++){var i=a[l];0!==s[i]&&(r=!1)}r&&(o.splice(t--,1),e=n(n.s=a[0]))}return e}var r={},s={app:0},o=[];function n(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=r,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/install/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=i;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=a("5c96"),o=a.n(s),n=(a("0fae"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("img",{attrs:{src:a("8fd5")}}),r("h3",[e._v("欢迎使用 g3-cms")]),r("el-steps",{attrs:{active:e.activeStep,"align-center":""}},[r("el-step",{attrs:{title:"步骤1",description:"数据库设置"}}),r("el-step",{attrs:{title:"步骤2",description:"超级管理员设置"}}),r("el-step",{attrs:{title:"步骤3",description:"安装"}})],1),r("div",{staticClass:"form-body"},[r("div",{staticClass:"form-steps"},[1==e.activeStep?r("div",[r("el-form",{ref:"step1form",staticStyle:{"text-align":"left"},attrs:{model:e.form,"label-width":"120px",rules:e.step1rules}},[r("div",{staticClass:"form-step-title"},[e._v("数据库设置")]),r("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"数据库类型",prop:"databaseType",required:""}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.databaseType,callback:function(t){e.$set(e.form,"databaseType",t)},expression:"form.databaseType"}},e._l(e.databaseOptions,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),"sqlite3"!=e.form.databaseType?r("div",[r("el-form-item",{attrs:{label:"数据库主机",prop:"databaseHost",required:""}},[r("el-input",{model:{value:e.form.databaseHost,callback:function(t){e.$set(e.form,"databaseHost",t)},expression:"form.databaseHost"}})],1),r("el-form-item",{attrs:{label:"数据库用户",prop:"databaseUser",required:""}},[r("el-input",{model:{value:e.form.databaseUser,callback:function(t){e.$set(e.form,"databaseUser",t)},expression:"form.databaseUser"}})],1),r("el-form-item",{attrs:{label:"数据库密码",prop:"databasePwd",required:""}},[r("el-input",{model:{value:e.form.databasePwd,callback:function(t){e.$set(e.form,"databasePwd",t)},expression:"form.databasePwd"}})],1)],1):e._e(),r("el-form-item",{attrs:{label:"数据库名称",prop:"databaseName",required:""}},[r("el-input",{model:{value:e.form.databaseName,callback:function(t){e.$set(e.form,"databaseName",t)},expression:"form.databaseName"}})],1)],1)],1):e._e(),2==e.activeStep?r("div",[r("el-form",{ref:"step2form",attrs:{model:e.form,"label-width":"120px",rules:e.step2rules}},[r("div",{staticClass:"form-step-title"},[e._v("超级管理员设置")]),r("el-form-item",{attrs:{label:"账户",prop:"username",required:""}},[r("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password",required:""}},[r("el-input",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1):e._e(),e.activeStep==e.maxStep?r("div"):e._e()]),r("div",{staticClass:"form-footer"},[1==e.activeStep?r("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"warn"},on:{click:e.handleTestConn}},[e._v("测试连接")]):e._e(),1!=e.activeStep?r("el-button",{attrs:{type:"primary"},on:{click:e.handlePre}},[e._v("上一步")]):e._e(),e.activeStep<e.maxStep-1?r("el-button",{attrs:{type:"primary"},on:{click:e.handleNext}},[e._v("下一步")]):e._e(),e.activeStep==e.maxStep-1?r("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("开始安装")]):e._e()],1)])],1)}),l=[],i=a("bc3a"),u=a.n(i);u.a.defaults.headers["Content-Type"]="application/json;charset=utf-8";var d=u.a.create({baseURL:"",timeout:1e4}),c={name:"App",components:{},data:function(){return{activeStep:1,maxStep:3,fullscreenLoading:!1,databaseOptions:[{label:"MySQL",value:"mysql"}],form:{databaseType:"mysql",databaseHost:void 0,databaseUser:void 0,databasePwd:void 0,databaseName:void 0,username:void 0,password:void 0,installDemo:!0},step1rules:{databaseType:[{required:!0,message:"请选择数据库类型",trigger:"blur"}],databaseHost:[{required:!0,message:"请输入数据库主机",trigger:"blur"}],databaseUser:[{required:!0,message:"请输入数据库用户",trigger:"blur"}],databasePwd:[{required:!0,message:"请输入数据库密码",trigger:"blur"}],databaseName:[{required:!0,message:"请输入数据库名称",trigger:"blur"}]},step2rules:{username:[{required:!0,message:"请输入管理员账户",trigger:"blur"},{min:4,max:20,message:"长度在 4 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入管理员账户",trigger:"blur"},{min:6,max:30,message:"长度在 6 到 30 个字符",trigger:"blur"}]}}},methods:{handlePre:function(){this.activeStep--},handleNext:function(){1===this.activeStep?this.handleStep1FormSubmit(!0):this.activeStep++},handleStep1FormSubmit:function(e){var t=this;this.$refs.step1form.validate((function(a){if(!a)return!1;t.fullscreenLoading=!0,d({url:"/api/common/testConn",method:"post",data:t.form}).then((function(a){200===a.data.code?e?t.activeStep++:t.$message({message:a.data.msg,type:"success"}):t.$message({message:a.data.msg,type:"error"}),t.fullscreenLoading=!1}))}))},handleStep2FormSubmit:function(){var e=this;this.$refs.step2form.validate((function(t){if(!t)return!1;e.fullscreenLoading=!0,d({url:"/api/common/install",method:"post",data:e.form}).then((function(t){200===t.data.code?e.$alert("欢迎使用 g3-cms","提示",{confirmButtonText:"确定",callback:function(){window.location.href="/backend/"}}):e.$message({message:t.data.msg,type:"error"}),e.fullscreenLoading=!1}))}))},handleSubmit:function(){this.handleStep2FormSubmit()},handleTestConn:function(){this.handleStep1FormSubmit(!1)}}},p=c,m=(a("034f"),a("2877")),f=Object(m["a"])(p,n,l,!1,null,null,null),b=f.exports;r["default"].config.productionTip=!1,r["default"].use(o.a),new r["default"]({render:function(e){return e(b)}}).$mount("#app")},"85ec":function(e,t,a){},"8fd5":function(e,t,a){e.exports=a.p+"static/img/logo.e7c490de.png"}});